# LangGraph Server 更新日志 (LangGraph Server Changelog)

> **注意:** 此更新日志不再积极维护。有关最新的 LangGraph Server 更新日志，请访问我们的新文档站点：[LangGraph Server 更新日志](https://docs.langchain.com/langgraph-platform/langgraph-server-changelog#langgraph-server-changelog)

[LangGraph Server](../../concepts/langgraph_server.md) 是一个用于创建和管理基于代理的应用程序的 API 平台。它提供内置的持久性、任务队列，并支持大规模部署、配置和运行助手（代理工作流）。此更新日志记录了 LangGraph Server 版本的所有重要更新、功能和修复。

---

## v0.2.111 (2025-07-29)
- 连接时立即开始心跳，以防止长时间启动期间发生 JS 图流式传输错误。

## v0.2.110 (2025-07-29)
- 将中断作为所有操作（流除外）的默认值，以保持一致的行为。

## v0.2.109 (2025-07-28)
- 修复了未设置 `config_type` 时缺少配置模式的问题。

## v0.2.108 (2025-07-28)
- 添加了对 langgraph v0.6 的兼容性，包括新的上下文 API 支持和迁移，以增强助手操作中的上下文处理。

## v0.2.107 (2025-07-27)
- 为身份验证过程实施了缓存以提高性能。
- 合并计数和选择查询以提高数据库查询效率。

## v0.2.106 (2025-07-27)
- 记录运行是否使用可恢复流。

## v0.2.105 (2025-07-27)
- 添加了一个 `/heapdump` 端点来捕获和保存 JS 进程堆数据。

## v0.2.103 (2025-07-25)
- 更正了元数据端点以确保准确的数据检索。

## v0.2.102 (2025-07-24)
- 在 wait 方法中捕获中断事件，以保留旧行为并默认流式传输更新。
- 在 JavaScript 环境中添加了对 SDK structlog 的支持，增强了日志记录功能。

## v0.2.101 (2025-07-24)
- 对自托管环境使用了正确的元数据端点，解决了访问问题。

## v0.2.99 (2025-07-22)
- 通过添加内存缓存和更有效地处理 Redis 连接错误来改进许可证验证。
- 自动从内存中删除从 `langgraph.json` 中删除的代理，以防止持久性问题。
- 确生成的 UI 的 UI 命名空间是有效的 JavaScript 属性名称，以防止错误。
- 针对改进的请求验证反馈引发 422 错误。

## v0.2.98 (2025-07-19)
- 添加了 langgraph 节点上下文，以改进日志过滤和跟踪可见性。

## v0.2.97 (2025-07-19)
- 修复了在隔离后台循环上发生的 ckpt 摄取工人的调度问题。
- 确保队列工作者仅在所有迁移完成后才启动。
- 为线程状态问题添加了更详细的错误消息，并改进了状态更新失败时的响应处理。
- 在检索线程状态时公开中断 ID，以增强 API 响应详细信息。

## v0.2.96 (2025-07-17)
- 为可配置的标头模式添加了回退机制，以更有效地处理排除/包含设置。

## v0.2.95 (2025-07-17)
- 如果将来已经完成，则避免设置将来，以防止多余的操作。
- 通过将 Python 3.12 以下版本的 `typing.TypedDict` 切换到 `typing_extensions.TypedDict`，解决了 CI 中的兼容性错误。

## v0.2.94 (2025-07-16)
- 通过省略 langgraph 版本 0.5 及更高版本的挂起发送来提高性能。
- 改进了服务器启动日志，以便在设置 DD_API_KEY 环境变量时提供更清晰的警告。

## v0.2.93 (2025-07-16)
- 删除了运行元数据的 GIN 索引以提高性能。

## v0.2.92 (2025-07-16)
- 启用了 blob 和检查点的复制功能，提高了数据管理的灵活性。

## v0.2.91 (2025-07-16)
- 通过内联小值（null、numeric、str 等）减少了对 `checkpoint_blobs` 表的写入。这意味着我们不需要为尚未更新的通道存储额外的值。

## v0.2.90 (2025-07-16)
- 通过节点本地后台队列改进检查点写入。

## v0.2.89 (2025-07-15)
- 通过删除外键并将检查点写入与线程/运行状态分离，并更新了记录器以防止与超时相关的故障。

## v0.2.88 (2025-07-14)
- 删除了 `run` 表中 `thread` 的外键约束，以简化数据库模式。

## v0.2.87 (2025-07-14)
- 为 Redis 工作者信号添加了更详细的日志以改进调试。

## v0.2.86 (2025-07-11)
- 在 `/mcp` 端点中遵守工具描述，以与预期功能保持一致。

## v0.2.85 (2025-07-10)
- 添加了对 `runs/wait` 的 `on_disconnect` 字段的支持，并包含断开连接日志以进行更好的调试。

## v0.2.84 (2025-07-09)
- 删除了不必要的状态更新以简化线程处理，并将版本更新为 0.2.84。

## v0.2.83 (2025-07-09)
- 将可恢复流的默认生存时间减少到 2 分钟。
- 增强了数据提交逻辑，根据许可证配置将数据发送到 Beacon 和 LangSmith 实例。
- 启用了在配置端点时将自托管数据提交到 Langsmith 实例的功能。

## v0.2.82 (2025-07-03)
- 通过使用 join 实现锁来解决后台运行中的竞争条件，确跨 CTE 的可靠执行。

## v0.2.81 (2025-07-03)
- 通过减少初始等待时间来优化运行流，以提高对旧运行或不存在运行的响应能力。

## v0.2.80 (2025-07-03)
- 更正了 `logger.ainfo()` API 调用中的参数传递，以解决 TypeError。

## v0.2.79 (2025-07-02)
- 修复了与远程图进行检查点操作时的 JsonDecodeError，方法是更正 JSON 序列化以正确处理尾部斜杠。
- 引入了一个配置标志，用于在所有路由中全局禁用 webhook。

## v0.2.78 (2025-07-02)
- 为 webhook 调用添加了超时重试以提高可靠性。
- 添加了 HTTP 请求指标，包括请求计数和延迟直方图，以增强监控能力。

## v0.2.77 (2025-07-02)
- 添加了 HTTP 指标以改进性能监控。
- 更改了 Redis 缓存分隔符以减少与子图消息名称的冲突，并更新了缓存行为。

## v0.2.76 (2025-07-01)
- 更新了 Redis 缓存分隔符以防止与子图消息冲突。

## v0.2.74 (2025-06-30)
- 在隔离循环中调度 webhook，以确保线程安全操作并防止 PYTHONASYNCIODEBUG=1 出错。

## v0.2.73 (2025-06-27)
- 修复了无限帧循环问题，并由于 structlog 的意外行为而删除了 dict_parser。
- 在运行取消期间发生死锁时抛出 409 错误，以优雅地处理锁冲突。

## v0.2.72 (2025-06-27)
- 确保与未来 langgraph 版本的兼容性。
- 实现了 409 响应状态以处理取消期间的死锁问题。

## v0.2.71 (2025-06-26)
- 改进了日志记录，以提高日志类型的清晰度和详细程度。

## v0.2.70 (2025-06-26)
- 改进了错误处理，以更好地区分和记录由用户引起的 TimeoutError 与内部运行超时。

## v0.2.69 (2025-06-26)
- 为 crons API 添加了排序和分页，并更新了模式定义以提高准确性。

## v0.2.66 (2025-06-26)
- 修复了使用 `on_not_exist="create"` 创建具有相同 thread_id 的多个运行时出现的 404 错误。

## v0.2.65 (2025-06-25)
- 确保仅在必要时返回 `assistant_versions` 中的字段。
- 确保内存和 PostgreSQL 用户的数据类型一致，改进内部身份验证处理。

## v0.2.64 (2025-06-24)
- 为版本条目添加了描述以提高清晰度。

## v0.2.62 (2025-06-23)
- 改进了 JS Studio 中自定义身份验证的用户处理。
- 将 Prometheus 格式的运行统计信息添加到指标端点，以进行更好的监控。
- 将 Prometheus 格式的运行统计信息添加到指标端点。

## v0.2.61 (2025-06-20)
- 设置 Redis 连接的最大空闲时间，以防止不必要的打开连接。

## v0.2.60 (2025-06-20)
- 增强了错误日志记录，以包含字典操作的回溯详细信息。
- 添加了一个 `/metrics` 端点以公开队列工作者指标以进行监控。

## v0.2.57 (2025-06-18)
- 从可重试异常中删除了 CancelledError，以允许本地中断，同时保持工作者的可重试性。
- 引入了中间件，以便在收到 SIGINT 后完成正在进行的请求后优雅地关闭服务器。
- 减少了存储在检查点中的元数据，仅包含必要信息。
- 改进了加入运行中的错误处理，以便在出现错误时返回详细信息。

## v0.2.56 (2025-06-17)
- 通过添加 SIGTERM 信号处理程序提高了应用程序稳定性。

## v0.2.55 (2025-06-17)
- 改进了队列入口点中取消的处理。

## v0.2.54 (2025-06-16)
- 增强了许可证验证期间 LuaLock 超时的错误消息。
- 通过要求显式 ::text 转换并相应地更新测试，修复了自定义身份验证中的 $contains 过滤器。
- 确保项目和租户 ID 格式化为 UUID 以保持一致性。

## v0.2.53 (2025-06-13)
- 解决了一个时间问题，以确保队列仅在图注册后启动。
- 通过在单个查询中设置线程和运行状态来提高性能，并增强了检查点写入期间的错误处理。
- 将默认后台宽限期减少到 3 分钟。

## v0.2.52 (2025-06-12)
- 现在会在省略某个图时记录预期的图，以提高可追溯性。
- 为可恢复流实现了生存时间 (TTL) 功能。
- 通过添加唯一索引和优化行锁定，提高了查询效率和一致性。

## v0.2.51 (2025-06-12)
- 通过将任务标记为准备重试来处理 `CancelledError`，从而改进了工作进程中的错误管理。
- 将 LG API 版本和请求 ID 添加到元数据和日志中，以便更好地跟踪。
- 通过并发创建索引提高了数据库性能。
- 确保仅在设置 Redis 运行标记后才提交 postgres 写入，以防止竞争条件。
- 通过在 thread_id/running 上添加唯一索引、优化行锁并确保确定性运行选择，增强了查询效率和可靠性。
- 通过确保 Postgres 更新仅在设置 Redis 运行标记后发生，解决了一个竞争条件。

## v0.2.46 (2025-06-07)
- 引入了针对每个操作的新连接，同时在 Threads 状态 `update()` 和 `bulk()` 命令中保留事务特性。

## v0.2.45 (2025-06-05)
- 通过合并跟踪上下文增强了流功能。
- 从 Crons.search 函数中删除了不必要的查询。
- 解决了为多个 cron 作业调度下一次运行时连接重用的问题。

## v0.2.44 (2025-06-04)
- 增强了 worker 逻辑，使其在达到 Redis 消息限制时先退出管道再继续。
- 引入了 Redis 消息大小的上限，并提供了跳过大于 128 MB 的消息的选项，以提高性能。
- 确保管道始终正确关闭以防止资源泄漏。

## v0.2.43 (2025-06-04)
- 通过在元数据调用中省略日志并确在值流中符合输出模式来提高性能。
- 确保连接在使用后正确关闭。
- 对齐输出格式以严格遵守指定的模式。
- 停止在元数据请求中发送内部日志以提高隐私性。

## v0.2.42 (2025-06-04)
- 添加了时间戳以跟踪请求运行的开始和结束。
- 将跟踪器信息添加到了配置设置中。
- 添加了对带有跟踪上下文的流的支持。

## v0.2.41 (2025-06-03)
- 添加了锁定机制以防止管道执行中的错误。
